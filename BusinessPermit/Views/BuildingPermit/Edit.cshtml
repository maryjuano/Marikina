
@model BusinessPermit.Models.BuildingPermit

@{
    ViewBag.Title = "Pending Application";
    ViewBag.CurrentEntity = "Building Permit";
    ViewBag.WebPageTitle = Model.ApplicationNumber;
}

@section toolbarleft {
    <li class="breadcrumb-item"><a href="~/Dashboard/Index">Home</a></li>
    <li class="breadcrumb-item"><a href="~/BuildingPermit/">Pending Applications</a></li>
    <li class="breadcrumb-item active">@Model.ApplicationNumber<li>
}

@section toolbarright {
<li><a href="#" id="btnApprove" title="Approve Permit"><span class="fa fa-check"></span>&nbsp;APPROVE</a></li>
<li><a href="#" id="btnDisqualify" title="Deny Permit"><span class="fa fa-ban"></span>&nbsp;DENIED</a></li>
}


@using (Html.BeginForm("Edit", "BusinessPermit", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    <div class="ibox-content">



        <br />
        @Html.ValidationSummary(true)

        <div class="form-horizontal">
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">Requirements.</label>
                            <div class="col-md-9">
                                <a href="~/BuildingPermit/DownloadAttachment?id=@Model.BuildingPermitId">Download Attachments</a>
                            </div>
                        </div>
                       
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">Area No.</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.AreaNumber</span></h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">TIN</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.TIN</span></h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-horizontal">
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">Permit Type</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@ViewBag.BuildingType</span></h4>      
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3">Firstname</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.FirstName</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Occupancy</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.OccupancyClassified</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Ownership</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.FormOfOwnerShip</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Total Cost</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.TotalEstimatedCost</span></h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">LC Permit</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.LocationaClearanceReference</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Middlename</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.MiddleInitial</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">No. Of Units</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.NumberOfUnits</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Proposed Construction Date</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.ProposedConstructionDate.ToLongDateString()</span></h4>           
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Work Scope</label>
                            <div class="col-md-9">                               
                                <h4><span class="label label-default">@ViewBag.ScopeOfWork</span></h4>            
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3"></label>
                            <div class="col-md-9">
                                @Html.TextBoxFor(model => model.ScopeOfWorkOther, new { @class = "form-control hidden", @placeholder = "Please specify scope of work", @required = true, @id = "scopetext" })
                                @Html.ValidationMessageFor(model => model.ScopeOfWorkOther)
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-3">Floor Area</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.TotalFloorArea</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Lastname</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.LastName</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Expected Completion Date</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.ExpectedCompletionDate.ToLongDateString()</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Tel No.</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@Model.ExpectedCompletionDate.ToLongDateString()</span></h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Occupancy</label>
                            <div class="col-md-9">
                                <h4><span class="label label-default">@ViewBag.BuildingUse</span></h4>            
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3"></label>
                            <div class="col-md-9">
                                @Html.TextBoxFor(model => model.BuildingUseOther, new { @class = "form-control hidden", @placeholder = "Specify Use or Character of Occupancy", @required = true, @id = "buildingusetext" })
                                @Html.ValidationMessageFor(model => model.BuildingUseOther)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>      
    </div>
    <input type="submit" value="Create" class="btn btn-default hidden" />
}

@section scripts {
    <script>
        $('#btnApprove').click(function () {
            $.ajax({
                url: '/BuildingPermit/ApproveApplication', type: 'POST',
                data: { id: '@Model.BuildingPermitId' }
            }).then(function () {
                alert('Building Permit Application has been approved!');
                window.location.href = "/BuildingPermit/";
            })
        });

        $('#btnDisqualify').click(function () {
            $.ajax({
                url: '/BuildingPermit/DisqualifyApplication', type: 'POST',
                data: { id: '@Model.BuildingPermitId' }
            }).then(function () {
                alert('Building Permit Application has been denied!');
                window.location.href = "/BuildingPermit/";
            })
        })
</script>    
    <script src="~/dist/js/app.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
}